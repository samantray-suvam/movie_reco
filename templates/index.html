<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MovieBox</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/video.js/7.20.3/video-js.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/video.js/7.20.3/video.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;500;600;700&display=swap');

        ::selection{
            background-color: #c9a959;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f9f6f0;
            background-image: 
                url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23766853' fill-opacity='0.04'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"),
                radial-gradient(circle at top right, rgba(226, 222, 213, 0.5), transparent),
                radial-gradient(circle at bottom left, rgba(235, 231, 225, 0.5), transparent);
        }
        .elegant-gradient {
            background: linear-gradient(45deg, #f4f1ea, #ffffff);
            position: relative;
        }
        .elegant-gradient::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(118, 104, 83, 0.2), transparent);
        }
        .elegant-text {
            color: #2c2c2c;
        }
        .accent-text {
            color: #4a4236;
        }
        .cinephile-quote {
            font-family: 'Playfair Display', serif;
            font-style: italic;
            color: #766853;
            font-size: 0.9rem;
            line-height: 1.6;
            opacity: 0.85;
        }
        .search-input {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(118, 104, 83, 0.2);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        .search-input:focus {
            border-color: rgba(118, 104, 83, 0.3);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }
        .video-container {
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="min-h-screen text-white">
    <!-- Navbar -->
    <nav class="fixed w-full bg-white/90 backdrop-blur-sm border-b border-stone-200 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="w-1/3"><!-- Left space --></div>
            <div class="w-1/3 flex justify-center">
                <a href="/" class="text-2xl font-bold font-['Playfair_Display'] accent-text hover:opacity-80 transition-opacity">
                    MovieBox
                </a>
            </div>
            <div class="w-1/3"><!-- Right space --></div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container mx-auto px-4 pt-16">
        <div class="flex flex-col md:flex-row gap-12 items-center pt-8">
            <!-- Left Section -->
            <div class="w-full md:w-1/2">
                <div class="max-w-xl">
                    <div class="mb-4 cinephile-quote">"The right story finds the right reader at the right time"</div>
                    <h1 class="text-2xl md:text-4xl font-bold leading-tight font-['Playfair_Display'] elegant-text">
                        Discover your next <br>masterpiece
                    </h1>
                    <div class="mt-2 h-px w-24 bg-gradient-to-r from-stone-200 via-stone-400 to-stone-200"></div>
                    <div class="mt-6 flex gap-4 text-sm text-stone-600">
                        <div class="flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z" />
                            </svg>
                            <span>Curated Films</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                            </svg>
                            <span>Literary Gems</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Section -->
            <div class="w-full md:w-1/2 flex flex-col gap-6">
                <!-- Video Player Container -->
                <div class="group relative">
                    <div class="absolute -inset-0.5 bg-gradient-to-r from-stone-200 to-stone-300 rounded-lg blur opacity-25 group-hover:opacity-40 transition duration-1000"></div>
                    <div class="w-full aspect-video elegant-gradient rounded-md overflow-hidden relative border border-stone-200">
                        <div class="video-container" id="videoContainer">
                            <!-- Videos will be loaded dynamically via JavaScript -->
                        </div>
                        <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/20 to-transparent h-16 pointer-events-none"></div>
                    </div>
                </div>

                <!-- Search Bar -->
                <form id="searchForm" class="w-full max-w-xl">
                    <div class="mb-3 text-xs tracking-wider text-stone-500 uppercase">Explore the Archives</div>
                    <div class="relative flex">
                        <input type="text" 
                               id="searchInput"
                               placeholder="Enter a title, director, author, or genre..." 
                               class="search-input w-full px-5 py-3 rounded-l-md text-stone-800 placeholder-stone-400 focus:outline-none transition-all duration-300">
                        <button type="submit" class="px-5 py-3 bg-stone-800 text-white rounded-r-md hover:bg-stone-700 transition-colors">
                            Search
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <script>
        // Free demo videos from Pixabay
        const videos = [
            'https://cdn.pixabay.com/video/2024/06/02/214986_tiny.mp4',
            'https://cdn.pixabay.com/video/2020/04/07/35263-407130686_tiny.mp4',
            'https://cdn.pixabay.com/video/2023/08/17/176521-855920743_tiny.mp4'
        ];

        let currentVideoIndex = 0;
        const videoContainer = document.getElementById('videoContainer');

        function createVideoElement(src) {
            const videoWrapper = document.createElement('div');
            videoWrapper.className = 'w-full h-full';
            
            const video = document.createElement('video');
            video.className = 'video-js vjs-default-skin vjs-big-play-button vjs-fluid';
            video.setAttribute('playsinline', '');
            video.setAttribute('muted', 'muted');
            video.setAttribute('loop', 'loop');
            video.setAttribute('data-setup', '{}');
            
            const source = document.createElement('source');
            source.src = src;
            source.type = 'video/mp4';
            
            video.appendChild(source);
            videoWrapper.appendChild(video);
            return { wrapper: videoWrapper, video: video };
        }

        function playNextVideo() {
            videoContainer.innerHTML = '';
            const { wrapper, video } = createVideoElement(videos[currentVideoIndex]);
            videoContainer.appendChild(wrapper);
            
            const player = videojs(video, {
                controls: false,
                autoplay: true,
                preload: 'auto',
                muted: true,
                loop: true,
                fluid: true
            });

            player.ready(function() {
                this.play().catch(function(error) {
                    console.log("Video play failed:", error);
                });
            });

            currentVideoIndex = (currentVideoIndex + 1) % videos.length;
        }

        // Start playing videos
        playNextVideo();
        setInterval(playNextVideo, 10000); // Switch video every 10 seconds

        // Search functionality
        const searchForm = document.getElementById('searchForm');
        const searchInput = document.getElementById('searchInput');

        searchForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const query = searchInput.value.trim();
            if (!query) return;

            try {
                const response = await fetch(`/api/search?q=${encodeURIComponent(query)}`);
                if (!response.ok) throw new Error('Search failed');
                
                const data = await response.json();
                localStorage.setItem('searchResults', JSON.stringify(data));
                window.location.href = `/results?q=${encodeURIComponent(query)}`;
            } catch (error) {
                console.error('Search error:', error);
                // In a real app, you'd show an error message to the user
            }
        });
    </script>
</body>
</html>
